<div class="clients">

  <div class="action-bar text-right">
    <button type="button" onclick="F1.modal.show('#add-client', event)">+ Add Client</button>
  </div>
  <table class="table">
    <thead>
      <tr>
        <th>#</th>
        <th>Acc No.</th>
        <th>Name</th>
        <th>Regex</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <?php foreach ($clients as $index => $client): ?>
      <tr>
        <td><?=$index+1?></td>
        <td><?=$client->acc_no?></td>
        <td><?=$client->name?></td>
        <td><?=htmlentities($client->regex)?></td>
        <td><a class="pagelink" href="clients/client/edit?id=<?=$client->id?>">Edit Client</a></td>
      </tr>
      <?php endforeach; ?>
      <?php if (empty($clients)):?>
      
      <tr><td colspan="5">- None -</td></tr>
      <?php endif; ?>
      
    </tbody>
  </table>
  
  <!-- ADD CLIENT MODAL -->
  <div id="add-client" class="modal hidden">
    <form method="POST" class="pjax">
      <div class="modal-inner">
        <header>
          <a class="modal-close" href="#" onclick="F1.modal.dismiss(this, event)">Close X</a>
        </header>
        <br>
        <div class="modal-content">
          <fieldset>
            <legend>New Client</legend>
            <div class="form-field">
              <label>Account No.</label>
              <input name="client[acc_no]" value="<?=$nextAccNo?>" type="text">
            </div>
            <div class="form-field field-md">
              <label>Name</label>
              <input name="client[name]" value="" type="text">
            </div>
            <div class="form-field field-md">
              <label>Description</label>
              <textarea name="client[description]" rows="3"></textarea>
            </div>
            <div class="form-field field-md">
              <label>ID regex</label>
              <textarea name="client[regex]" rows="3"></textarea>
            </div>
            <div class="form-field">
              <label>Ledger Account</label>
              <?=$chartOfAccountsDropdown?>
            </div>            
          </fieldset>          
        </div>
        <br>
        <footer>
          <div class="buttons-bar">
            <button type="submit" name="add-client">Add new client</button>
          </div>
        </footer>
      </form>
    </div>
  </div>
  
</div>
